
单点登录，即多个终端通用一个控制中心。不必为了各个终端去适配不同的用户信息。
这要能实现「一次登录，全线通用」，才是真正的单点登录。


单点登录
![](PublicImage/SSO单点登录/Pasted%20image%2020240513155908.png)


常见三种
### session + cookie

![](PublicImage/SSO单点登录/Pasted%20image%2020240513160159.png)
流程
- 用户登录，认证中心给他返回一个cookie。
- 用户访问一些信息，需要鉴权，终端1向认证中心发送请求检查该用户的信息。
- 如果检查到信息，那么就对这个用户展示能看的内容。
- 否则就不展示内容。

优点：服务端对用户拥有绝对的控制权

缺点：烧钱，当用户量很大的时候，认证中心需要升级，但是其他产品（终端）不需要如此大规模的认证中心（相当于只有一个人有大需求，而其他人没有，为了一个人升级认证中心就不划算）。
### token模式

![](../../Pasted%20image%2020240513161844.png)
流程：
- 用户登录，认证中心返回一个token
- 用户的所有操作都基于这个token，只有当token过期之后，服务器才会重新发送token。


优点：不耗费钱
缺点：对用户控制权较低，在token 没有过期之前无法控制用户的各种操作，如果需要那么就需要通知每一个子系统token无效来保证用户不会出现违规操作。


### 双token模式
短token用来操作，refreshToken用来刷新短token
 ![](../../Pasted%20image%2020240513162706.png)
 比如短token 10分钟20分钟失效，而长token 1个月失效
 流程：
 - 第一次请求返回refreshToken和token
 - 当token过期之后，使用refreshToken进行刷新token

优点：服务器基本不需要扩容，且能很好的实现对用户的控制

